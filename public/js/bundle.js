var app=function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2)}([function(e,t,a){"use strict";var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"libras_a_kg",value:function(e){return parseFloat((.453592*e).toFixed(2))}},{key:"pulgadas_a_cm",value:function(e){return parseFloat((2.54*e).toFixed(2))}},{key:"pies_a_cm",value:function(e){return parseFloat((30.48*e).toFixed(2))}},{key:"metros_a_cm",value:function(e){return parseFloat((100*e).toFixed(2))}},{key:"milimetros_a_cm",value:function(e){return parseFloat((e/10).toFixed(2))}},{key:"tipo_embalaje",value:function(e){switch(e){case 0:return"Cajas";case 1:return"Barriles";case 2:return"Sacos"}}},{key:"unidad_medida",value:function(e){switch(e){case 0:return"Centímetro";case 1:return"Pulgadas";case 2:return"Pies";case 3:return"Milímetro";case 4:return"Metros"}}},{key:"unidad_peso",value:function(e){switch(e){case 0:return"Kilogramos";case 1:return"Libras"}}},{key:"cm3_a_m3",value:function(e){return(e/1e6).toFixed(2)}},{key:"cm3_a_pies3",value:function(e){return(e/28316.84).toFixed(2)}}]),e}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={pallets:{ancho:101,largo:125,alto:14,maximopeso:1200},containers:[{name:"20 pies",w:236,h:240,d:590,mw:26e3},{name:"40 pies",w:236,h:246,d:1200,mw:26e3}]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.procesar=t.convertir=void 0;var i=r(a(0)),n=r(a(3));function r(e){return e&&e.__esModule?e:{default:e}}t.convertir=i.default,t.procesar=n.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=s(a(0)),r=s(a(1)),o=s(a(4));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.convertir=new n.default,this.items=[]}return i(e,[{key:"obtner_valores",value:function(){var e,t=0;return e=parseFloat($("#ancho-radio-mercancia").val()),t=1==parseInt($("#tipo-embalaje").val())?e:parseFloat($("#largo-mercancia").val()),{unidad_medida:parseInt($("#unidad-medida").val()),unidad_peso:parseInt($("#unidad-peso").val()),tipo_embalaje:parseInt($("#tipo-embalaje").val()),color_mercancia:$("#color-mercancia").val(),nombre_mercancia:$("#nombre-mercancia").val(),largo_mercancia:t,ancho_radio_mercancia:e,alto_mercancia:parseFloat($("#alto-mercancia").val()),peso_mercancia:parseFloat($("#peso-mercancia").val()),cantidad_mercancia:parseInt($("#cantidad-mercancia").val())}}},{key:"validar",value:function(e){var t,a=(c(t={largo_mercancia:{error:!1,detalle:[]},ancho_radio_mercancia:{error:!1,detalle:[]},alto_mercancia:{error:!1,detalle:[]},peso_mercancia:{error:!1,detalle:[]},cantidad_mercancia:{error:!1,detalle:[]},nombre_mercancia:{error:!1,detalle:[]}},"peso_mercancia",{error:!1,detalle:[]}),c(t,"cantidad_mercancia",{error:!1,detalle:[]}),t),i="",n="background-color: yellow";0==parseInt($("[name='pallets']:checked").val())?(0!=e.tipo_embalaje&&2!=e.tipo_embalaje||r.default.containers[1].d<=e.largo_mercancia&&(a.largo_mercancia.error=!0,a.largo_mercancia.detalle.push("El valor excede los limites permitidos del contenedor.")),r.default.containers[1].w<=e.ancho_radio_mercancia&&(a.ancho_radio_mercancia.error=!0,a.ancho_radio_mercancia.detalle.push("El valor excede los limites permitidos del contenedor.")),r.default.containers[1].h<=e.alto_mercancia&&(a.alto_mercancia.error=!0,a.alto_mercancia.detalle.push("El valor excede los limites permitidos del contenedor."))):1==parseInt($("[name='pallets']:checked").val())&&(0!=e.tipo_embalaje&&2!=e.tipo_embalaje||r.default.pallets.largo<=e.largo_mercancia&&(a.largo_mercancia.error=!0,a.largo_mercancia.detalle.push("El valor excede los limites permitidos del pallet.")),r.default.pallets.ancho<=e.ancho_radio_mercancia&&(a.ancho_radio_mercancia.error=!0,a.ancho_radio_mercancia.detalle.push("El valor excede los limites permitidos del pallet.")),r.default.containers[1].h-r.default.pallets.alto<=e.alto_mercancia&&(a.alto_mercancia.error=!0,a.alto_mercancia.detalle.push("El valor excede los limites permitidos del pallet."))),""===e.nombre_mercancia&&(a.nombre_mercancia.error=!0,a.nombre_mercancia.detalle.push("No puede dejar el campo vacio.")),isNaN(e.largo_mercancia)&&(a.largo_mercancia.error=!0,a.largo_mercancia.detalle.push("No puede dejar el campo vacio.")),isNaN(e.ancho_radio_mercancia)&&(a.ancho_radio_mercancia.error=!0,a.ancho_radio_mercancia.detalle.push("No puede dejar el campo vacio.")),isNaN(e.alto_mercancia)&&(a.alto_mercancia.error=!0,a.alto_mercancia.detalle.push("No puede dejar el campo vacio.")),isNaN(e.peso_mercancia)&&(a.peso_mercancia.error=!0,a.peso_mercancia.detalle.push("No puede dejar el campo vacio.")),isNaN(e.cantidad_mercancia)&&(a.cantidad_mercancia.error=!0,a.cantidad_mercancia.detalle.push("No puede dejar el campo vacio."));var o=/^[0-9.]+$/;if(0!=e.largo_mercancia&&o.test(e.largo_mercancia)||(a.largo_mercancia.error=!0,a.largo_mercancia.detalle.push("Solo se permiten números y deben ser mayores a cero (0).")),0!=e.ancho_radio_mercancia&&o.test(e.ancho_radio_mercancia)||(a.ancho_radio_mercancia.error=!0,a.ancho_radio_mercancia.detalle.push("Solo se permiten números y deben ser mayores a cero (0).")),0!=e.alto_mercancia&&o.test(e.alto_mercancia)||(a.alto_mercancia.error=!0,a.alto_mercancia.detalle.push("Solo se permiten números y deben ser mayores a cero (0).")),0!=e.peso_mercancia&&o.test(e.peso_mercancia)||(a.peso_mercancia.error=!0,a.peso_mercancia.detalle.push("Solo se permiten números y deben ser mayores a cero (0).")),0!=e.cantidad_mercancia&&o.test(e.cantidad_mercancia)||(a.cantidad_mercancia.error=!0,a.cantidad_mercancia.detalle.push("Solo se permiten números y deben ser mayores a cero (0).")),a.nombre_mercancia.error){var s="";a.nombre_mercancia.detalle.map(function(e,t){s+=e}),i+='<li> <p><span class="font-weight-bold">Nombre mercancia:</span> '+s+" </p></li>",$("#nombre-mercancia").attr("style",n)}else $("#nombre-mercancia").attr("style",null);if(a.largo_mercancia.error){var l="";a.largo_mercancia.detalle.map(function(e,t){l+=e}),i+='<li> <p><span class="font-weight-bold">Largo mercancia:</span> '+l+" </p></li>",$("#largo-mercancia").attr("style",n)}else $("#largo-mercancia").attr("style",null);if(a.ancho_radio_mercancia.error){var m="";a.ancho_radio_mercancia.detalle.map(function(e,t){m+=e}),i+='<li> <p><span class="font-weight-bold">Ancho o radio de la mercancia:</span> '+m+" </p></li>",$("#ancho-radio-mercancia").attr("style",n)}else $("#ancho-radio-mercancia").attr("style",null);if(a.alto_mercancia.error){var h="";a.alto_mercancia.detalle.map(function(e,t){h+=e}),i+='<li> <p><span class="font-weight-bold">Alto de la mercancia:</span> '+h+" </p></li>",$("#alto-mercancia").attr("style",n)}else $("#alto-mercancia").attr("style",null);if(a.peso_mercancia.error){var u="";a.peso_mercancia.detalle.map(function(e,t){u+=e}),i+='<li> <p><span class="font-weight-bold">Peso de la mercancia:</span> '+u+" </p></li>",$("#peso-mercancia").attr("style",n)}else $("#peso-mercancia").attr("style",null);if(a.cantidad_mercancia.error){var d="";a.cantidad_mercancia.detalle.map(function(e,t){d+=e}),i+='<li> <p><span class="font-weight-bold">Peso de la mercancia:</span> '+d+" </p></li>",$("#cantidad-mercancia").attr("style",n)}else $("#cantidad-mercancia").attr("style",null);return!(a.nombre_mercancia.error||a.largo_mercancia.error||a.ancho_radio_mercancia.error||a.alto_mercancia.error||a.peso_mercancia.error||a.cantidad_mercancia.error)||(Swal.fire({type:"error",title:"Error",confirmButtonText:"Aceptar",html:'\n        <p>Se encontraron errores al procesar sus datos. Se resaltarán los campos que necesiten su revisión</p>\n        <ul class="text-left mt-3">\n        '+i+"\n        </ul>\n        "}),!1)}},{key:"estandarizar",value:function(e){return 1==e.unidad_peso&&(e.peso_mercancia=this.convertir.libras_a_kg(e.peso_mercancia),e.unidad_peso=0),1==e.unidad_medida?(e.ancho_radio_mercancia=this.convertir.pulgadas_a_cm(e.ancho_radio_mercancia),e.alto_mercancia=this.convertir.pulgadas_a_cm(e.alto_mercancia),e.largo_mercancia=this.convertir.pulgadas_a_cm(e.largo_mercancia),e.unidad_medida=0):2==e.unidad_medida?(e.ancho_radio_mercancia=this.convertir.pies_a_cm(e.ancho_radio_mercancia),e.alto_mercancia=this.convertir.pies_a_cm(e.alto_mercancia),e.largo_mercancia=this.convertir.pies_a_cm(e.largo_mercancia),e.unidad_medida=0):3==e.unidad_medida?(e.ancho_radio_mercancia=this.convertir.milimetros_a_cm(e.ancho_radio_mercancia),e.alto_mercancia=this.convertir.milimetros_a_cm(e.alto_mercancia),e.largo_mercancia=this.convertir.milimetros_a_cm(e.largo_mercancia),e.unidad_medida=0):4==e.unidad_medida&&(e.ancho_radio_mercancia=this.convertir.metros_a_cm(e.ancho_radio_mercancia),e.alto_mercancia=this.convertir.metros_a_cm(e.alto_mercancia),e.largo_mercancia=this.convertir.metros_a_cm(e.largo_mercancia),e.unidad_medida=0),e}},{key:"agregar_item_acordion",value:function(){var e=this.estandarizar(this.obtner_valores());this.validar(e)&&(e.id=this.makeid(4),this.items.push(e),this.item_acordion(e),$("#nombre-mercancia").val(null),$("#largo-mercancia").val(null),$("#ancho-radio-mercancia").val(null),$("#alto-mercancia").val(null),$("#peso-mercancia").val(null),$("#cantidad-mercancia").val(null),this.randomcolor(),Swal.fire({type:"success",title:"Ok",text:"Item / bulto agregado",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}))}},{key:"item_acordion",value:function(e){var t='\n        <div class="ac" data-id="'+e.id+'"   >\n          <h2 class="ac-q" tabindex="1">\n            '+e.nombre_mercancia+" | "+this.convertir.tipo_embalaje(e.tipo_embalaje)+" | "+e.cantidad_mercancia+'\n            <span style="height: 20px;\n              width: 50px;\n              background-color: #'+e.color_mercancia+';\n              position: absolute;\n              margin-left: 15px;\n              border-radius: 40px;"></span>\n          </h2>\n          <div class="ac-a">\n\n            <ul class="pl-3 pt-3">\n              <li><span class="font-weight-bold">Unidad de medida:</span> '+this.convertir.unidad_medida(e.unidad_medida)+'</li>\n              <li><span class="font-weight-bold">Unidad de peso:</span> '+this.convertir.unidad_peso(e.unidad_peso)+'</li>\n              <li><span class="font-weight-bold">Tipo de embalaje:</span> '+this.convertir.tipo_embalaje(e.tipo_embalaje)+'</li>\n              <li><span class="font-weight-bold">Largo:</span> '+(1!=e.tipo_embalaje?e.largo_mercancia:"N/A")+'</li>\n              <li><span class="font-weight-bold">Ancho o radio:</span> '+e.ancho_radio_mercancia+'</li>\n              <li><span class="font-weight-bold">Alto:</span>  '+e.alto_mercancia+'</li>\n              <li><span class="font-weight-bold">Peso:</span> '+e.peso_mercancia+'</li>\n              <li><span class="font-weight-bold">Cantidad:</span> '+e.cantidad_mercancia+'</li>\n            </ul>\n  \n            <div class="float-right p-3">\n              <button type="button" class="btn btn-outline-info btn" onclick = "procesar.copiar(\''+e.id+'\')" >Copiar</button>\n              <button type="button" class="btn btn-outline-primary btn" onclick ="procesar.editar(\''+e.id+'\')" >Editar</button>\n              <button type="button" class="btn btn-outline-secondary btn" onclick = "procesar.preEliminar(\''+e.id+"')\">Eliminar</button>\n            </div>\n          </div>\n        </div>  \n    ";$("#acordion-container").append(t),new Accordion(".accordion-container"),document.getElementById("acordion-container").scrollIntoView(!0)}},{key:"makeid",value:function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}},{key:"preEliminar",value:function(e){var t=this;Swal.fire({title:"¿Está seguro?",text:"Se eliminarán estos datos",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(function(a){a.value&&t.eliminar(e)})}},{key:"eliminar",value:function(e){var t=this;this.items.map(function(a,i){a.id==e&&(t.items.splice(i,1),$("[data-id='"+e+"']").remove())}),new Accordion(".accordion-container")}},{key:"editar",value:function(e){var t=this;Swal.fire({type:"info",title:"Editar datos",text:"Los valores para su edición fueron agregados en el panel lateral."}),this.items.map(function(a,i){a.id==e&&t.asignar_valores(a)}),this.eliminar(e)}},{key:"asignar_valores",value:function(e){$("#unidad-medida").val(e.unidad_medida),$("#unidad-peso").val(e.unidad_peso),$("#tipo-embalaje").val(e.tipo_embalaje),$("#color-mercancia").val(e.color_mercancia),$("#color-mercancia").attr("style","background-color: #"+e.color_mercancia),$("#nombre-mercancia").val(e.nombre_mercancia),$("#largo-mercancia").val(e.largo_mercancia),$("#ancho-radio-mercancia").val(e.ancho_radio_mercancia),$("#alto-mercancia").val(e.alto_mercancia),$("#peso-mercancia").val(e.peso_mercancia),$("#cantidad-mercancia").val(e.cantidad_mercancia),jscolor.installByClassName("jscolor")}},{key:"copiar",value:function(e){var t=this;Swal.fire({type:"info",title:"Copiar datos",text:"Los valores para su edición fueron agregados en el panel lateral."}),this.items.map(function(a,i){a.id==e&&t.asignar_valores(a)})}},{key:"randomcolor",value:function(){for(var e="",t=0;t<6;t++)e+="0123456789".charAt(Math.floor(Math.random()*"0123456789".length));$("#color-mercancia").val(e).attr("style","background-color: #"+e),jscolor.installByClassName("jscolor")}},{key:"calcular",value:function(){var e=this;if(0==this.items.length)return Swal.fire({type:"error",title:"Error",confirmButtonText:"Aceptar",html:"\n        <p>Se encontraron errores al procesar sus datos. \n        Debe agregar al menos un item o mercancia</p>\n        "}),!1;for(var t=0;t<this.items.length;t++)if(!this.validar(this.items[t]))return this.asignar_valores(this.items[t]),this.eliminar(this.items[t].id),!1;Swal.fire({type:"warning",title:"Advertencia",text:"El tiempo de procesado dependerá de los recursos de su computador.",showConfirmButton:!0,confirmButtonText:"Aceptar",allowEscapeKey:!1,allowOutsideClick:!1}).then(function(){e.initProceso()})}},{key:"initProceso",value:function(){var e=[];this.items.map(function(t,a){e.push({name:t.nombre_mercancia,t:t.tipo_embalaje,ul:t.unidad_medida,uw:t.unidad_peso,d:t.largo_mercancia,w:t.ancho_radio_mercancia,h:t.alto_mercancia,wg:t.peso_mercancia,q:t.cantidad_mercancia,color:t.color_mercancia})});for(var t=document.getElementsByName("rotacion"),a=[],i=0;i<t.length;i++)t[i].checked?a.push(parseInt(t[i].value)):a.push(1);var n=document.getElementsByName("containers_tipo"),r=[];for(i=0;i<n[0].options.length;i++)n[0].options[i].selected&&r.push(parseInt(n[0].options[i].value));var s={containers:parseInt($("[name='container']:checked").val()),containers_tipo:r,pallets:parseInt($("[name='pallets']:checked").val()),apilable:parseInt($("[name='apilables']:checked").val()),rotacion:a},c=JSON.parse(new o.default(e,s).main(!0)),l=JSON.parse(new o.default(e,s).main(!1)),m=[this.validar_conteiner(c),this.validar_conteiner(l)],h=m.indexOf(Math.min.apply(Math,m)),u=0,d=0;this.validar_contenido(c)&&(0==h?u=1:u+=.5),this.validar_contenido(l)&&(1==h?d=1:d+=.5),console.log("probA",u),console.log("probP",d),u>d?InitNewProblem(c):u<d?InitNewProblem(l):0==u&&0==d?Swal.fire({type:"question",title:"probabilidad 0 ",text:"Resultados dieron una probabilidad 0."}):Swal.fire({type:"error",title:"Error",text:"Ocurrió un error al procesar los datos."})}},{key:"validar_contenido",value:function(e){var t=0,a=0;return this.items.map(function(e,a){t+=parseInt(e.cantidad_mercancia)}),e.box.map(function(e,t){try{e.items[0].items.length>0&&e.items.map(function(e,t){a+=e.items.length})}catch(t){a+=e.items.length}}),t==a}},{key:"validar_conteiner",value:function(e){var t=0;return e.box.map(function(e,a){/40 pies/.test(e.name)?t+=1:/20 pies/.test(e.name)&&(t+=.5)}),t}},{key:"debugvar",value:function(){for(var e=document.getElementsByName("rotacion"),t=[],a=0;a<e.length;a++)e[a].checked?t.push(parseInt(e[a].value)):t.push(1);var i=document.getElementsByName("containers_tipo"),n=[];for(a=0;a<i[0].options.length;a++)i[0].options[a].selected&&n.push(parseInt(i[0].options[a].value));var r={ajustes:{containers:parseInt($("[name='container']:checked").val()),containers_tipo:n,pallets:parseInt($("[name='pallets']:checked").val()),apilable:parseInt($("[name='apilables']:checked").val()),rotacion:t},items:this.items};console.log(r),navigator.clipboard.writeText(JSON.stringify(this.items))}},{key:"test",value:function(){var e=this;[["1 plts",1200,1e3,1100,10,1,3],["2 plts",1200,1e3,1100,10,2,3],["4 plts",1200,1e3,1250,10,4,3],["9 plts",1200,1e3,1250,10,9,3],["16 plts",400,300,300,10,16,3]].map(function(t,a){$("#unidad-medida").val(t[6]),$("#nombre-mercancia").val(t[0]),$("#largo-mercancia").val(t[1]),$("#ancho-radio-mercancia").val(t[2]),$("#alto-mercancia").val(t[3]),$("#peso-mercancia").val(t[4]),$("#cantidad-mercancia").val(t[5]),e.agregar_item_acordion()})}}]),e}();t.default=l},function(e,t,a){"use strict";var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();e.exports=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=a(5),r=a(7),o=a(0);this.Item=n.Item,this.Bin=n.Bin,this.Packer=n.Packer,this.packer=new this.Packer,this.j=new r,this.c=new o,this.ajustesObj=a(1),this.items=t,this.containers=[],this.containersFinal=[],this.itemsPacker=[],this.ajustes=i,this.medidaPallet=this.ajustesObj.default.pallets}return i(e,[{key:"verificar_si_entran_en_unode_40",value:function(e){var t=0,a=0;this.itemsPacker.forEach(function(e,i){0==e.t||2==e.t?(t+=e.width*e.height*e.depth,a+=e.weight):1==e.t&&(t+=Math.PI*(Math.pow(e.width,2)*e.height),a+=e.weight)});var i=this.containers[0].w*this.containers[0].h*this.containers[0].d;return e?this.containers[1]:t>i||a>this.containers[0].mw?this.containers[1]:this.containers[0]}},{key:"inicializar_containers",value:function(){var e=this.ajustesObj.default.containers;if(0==this.ajustes.containers)this.containers=e;else if(1==this.ajustes.containers){var t=[];this.ajustes.containers_tipo.forEach(function(a,i){t.push(e[a])}),this.containers=t}}},{key:"insertar_items_packer",value:function(){var e=this;if(0==this.itemsPacker.length)this.items.forEach(function(t,a){if(0==t.t||2==t.t)for(var i=0;i<e.items[a].q;i++){var n=new e.Item(e.items[a].name+" "+(i+1),e.items[a].w,e.items[a].h,e.items[a].d,e.items[a].wg,e.items[a].t,e.ajustes.apilable,e.ajustes.rotacion,e.items[a].color);e.packer.addItem(n),e.itemsPacker.push(n)}else if(1==t.t)for(var r=0;r<e.items[a].q;r++){var o=new e.Item(e.items[a].name+" "+(r+1),e.items[a].w,e.items[a].h,e.items[a].w,e.items[a].wg,e.items[a].t,e.ajustes.apilable,e.ajustes.rotacion,e.items[a].color);e.packer.addItem(o),e.itemsPacker.push(o)}});else for(var t=0;t<this.itemsPacker.length;t++)this.itemsPacker[t].position=[],this.packer.addItem(this.itemsPacker[t])}},{key:"insertar_items_packer_pallets",value:function(){var e=this;if(0==this.itemsPacker.length)this.items.forEach(function(t,a){if(0==t.t||2==t.t)for(var i=0;i<e.items[a].q;i++){var n=new e.Item(e.items[a].name,e.items[a].w,e.items[a].h,e.items[a].d,e.items[a].wg,e.items[a].t,e.ajustes.apilable,e.ajustes.rotacion,e.items[a].color);e.packer.addItem(n),e.itemsPacker.push(n)}else if(1==t.t)for(var r=0;r<e.items[a].q;r++){var o=new e.Item(e.items[a].name,e.items[a].w,e.items[a].h,e.items[a].w,e.items[a].wg,e.items[a].t,e.ajustes.apilable,e.ajustes.rotacion,e.items[a].color);e.packer.addItem(o),e.itemsPacker.push(o)}});else for(var t=0;t<this.itemsPacker.length;t++)console.log(this.itemsPacker[t]),this.itemsPacker[t].position=[],this.packer.addItem(this.itemsPacker[t])}},{key:"identificar",value:function(e){for(var t=e+" ",a=50-e.length,i=0;i<a;i++)t+="=";console.log("\n"+t)}},{key:"verificarItemsNoEntraron",value:function(){for(var e=this,t=function(t){for(var a=function(a){for(var i=[],n=0;n<e.itemsPacker.length;n++)i.push(e.itemsPacker[n].id);var r=i.findIndex(function(i){return i==e.containersFinal[t].items[a].id});r>=0&&e.itemsPacker.splice(r,1)},i=0;i<e.containersFinal[t].items.length;i++)a(i)},a=0;a<this.containersFinal.length;a++)t(a)}},{key:"generarContainers_old",value:function(e){for(var t="",a=0;a<this.containers.length;a++)t=new this.Bin(this.containers[a].name+" "+e,this.containers[a].w,this.containers[a].h,this.containers[a].d,this.containers[a].mw),this.containersFinal.push(t),this.packer.addBin(t)}},{key:"generarContainers",value:function(e,t){var a=new this.Bin(e.name+" "+t,e.w,e.h,e.d,e.mw);this.containersFinal.push(a),this.packer.addBin(a)}},{key:"ordenar_items",value:function(){for(var e=1;e<this.items.length;++e)for(var t=0;t<this.items.length-e;++t)if(this.items[t].w<this.items[t+1].w&&this.items[t].h<this.items[t+1].h&&this.items[t].d<this.items[t+1].d){var a=this.items[t];this.items[t]=this.items[t+1],this.items[t+1]=a}}},{key:"estandarizar_items",value:function(){var e=this;this.items.forEach(function(t,a){1==t.uw&&(e.items[a].wg=e.c.libras_a_kg(t.wg)),1==t.ul&&(console.log("entrada: ",t.w),console.log("salida: ",e.c.pulgadas_a_cm(t.w)),e.items[a].w=e.c.pulgadas_a_cm(t.w),e.items[a].h=e.c.pulgadas_a_cm(t.h),e.items[a].d=e.c.pulgadas_a_cm(t.d)),2==t.ul&&(e.items[a].w=e.c.pies_a_cm(t.w),e.items[a].h=e.c.pies_a_cm(t.h),e.items[a].d=e.c.pies_a_cm(t.d)),3==t.ul&&(e.items[a].w=e.c.milimetros_a_cm(t.w),e.items[a].h=e.c.milimetros_a_cm(t.h),e.items[a].d=e.c.milimetros_a_cm(t.d)),4==t.ul&&(e.items[a].w=e.c.metros_a_cm(t.w),e.items[a].h=e.c.metros_a_cm(t.h),e.items[a].d=e.c.metros_a_cm(t.d))}),console.log("items procesadal \n ",this.items)}},{key:"rotar_items",value:function(e){return e.forEach(function(t,a){t.items.forEach(function(t,i){var n=t.width,r=t.height,o=t.depth;switch(t.rotationType){case 1:e[a].items[i].width=r,e[a].items[i].height=n,e[a].items[i].depth=o;break;case 2:e[a].items[i].width=r,e[a].items[i].height=o,e[a].items[i].depth=n;break;case 3:e[a].items[i].width=o,e[a].items[i].height=r,e[a].items[i].depth=n;break;case 4:e[a].items[i].width=o,e[a].items[i].height=n,e[a].items[i].depth=r;break;case 5:e[a].items[i].width=n,e[a].items[i].height=o,e[a].items[i].depth=r}})}),e}},{key:"empaquetar_sin_pallets",value:function(e){for(var t=1;;){if(this.insertar_items_packer(),0==this.ajustes.containers){var a=this.verificar_si_entran_en_unode_40(e);this.generarContainers(a,t++)}else this.generarContainers_old(t++);if(this.packer.pack(),this.verificarItemsNoEntraron(),console.log(this.itemsPacker),0==this.itemsPacker.length||t>50)break}this.identificar("\n\n\n\nRESULTADO ");for(var i=[],n=0;n<this.containersFinal.length;n++)0!=this.containersFinal[n].items.length&&i.push(this.containersFinal[n]);return i=this.rotar_items(i),console.log(i),this.j.generar_json(i)}},{key:"crear_contenedor_pallet",value:function(e){var t=new this.Bin("Pallet para container de "+e.name,this.medidaPallet.ancho,e.h-this.medidaPallet.alto,this.medidaPallet.largo,this.medidaPallet.maximopeso);this.containersFinal.push(t),this.packer.addBin(t)}},{key:"empaquetar_dentro_de_los_pallets",value:function(e){for(var t=1;;){if(this.insertar_items_packer(),0==this.ajustes.containers){var a=this.verificar_si_entran_en_unode_40(e);this.crear_contenedor_pallet(a,t++)}if(this.packer.pack(),this.verificarItemsNoEntraron(),console.log(this.itemsPacker),0==this.itemsPacker.length||t>50)break}this.identificar("\n\n\n\nRESULTADO ");for(var i=[],n=0;n<this.containersFinal.length;n++)0!=this.containersFinal[n].items.length&&i.push(this.containersFinal[n]);return i=this.rotar_items(i)}},{key:"empaquetar_con_pallets",value:function(e,t){for(var a=1;;){if(this.insertar_items_packer_pallets(),0==this.ajustes.containers){var i=this.verificar_si_entran_en_unode_40(e);this.generarContainers(i,a++)}else this.generarContainers_old(a++);if(this.packer.pack(),this.verificarItemsNoEntraron(),0==this.itemsPacker.length||a>50)break}this.identificar("\n\n\n\nRESULTADO ");for(var n=[],r=0;r<this.containersFinal.length;r++)0!=this.containersFinal[r].items.length&&n.push(this.containersFinal[r]);n=this.rotar_items(n);var o={items:t,pallet:this.medidaPallet};return this.j.generar_json(n,o)}},{key:"main",value:function(e){var t=this;if(this.ordenar_items(),this.estandarizar_items(),this.inicializar_containers(),0==this.ajustes.pallets)return this.empaquetar_sin_pallets(e);if(1==this.ajustes.pallets){var a=this.empaquetar_dentro_de_los_pallets(e);return this.items=[],a.forEach(function(e,a){t.items.push({color:"",d:e.depth,h:e.height,name:e.items[0].name,q:1,t:0,ul:0,uw:0,w:e.width,wg:0})}),this.containersFinal=[],this.itemsPacker=[],this.packer=new this.Packer,this.empaquetar_con_pallets(e,a)}}}]),e}()},function(e,t,a){"use strict";(function(e){var a,i,n,r,o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}r=function(){return function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){var i;Object.defineProperty(t,"__esModule",{value:!0});var n=0,r=[0,0,0],s=(l(i={},n,"RotationType_WHD (w,h,d)"),l(i,1,"RotationType_HWD (h,w,d)"),l(i,2,"RotationType_HDW (h,d,w)"),l(i,3,"RotationType_DHW (d,h,w)"),l(i,4,"RotationType_DWH (d,w,h)"),l(i,5,"RotationType_WDH (w,d,h)"),i),m=function(){function e(t,a,i,n,r){c(this,e),this.name="",this.width=0,this.height=0,this.depth=0,this.maxWeight=0,this.items=[],this.name=t,this.width=a,this.height=i,this.depth=n,this.maxWeight=r,this.cw=r}return o(e,[{key:"getName",value:function(){return this.name}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getMaxWeight",value:function(){return this.maxWeight}},{key:"getItems",value:function(){return this.items}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}},{key:"putItem",value:function(e,t){var a=!1;e.position=t;for(var i=0;i<6;i++){if(1==e.t)e.rotationType=0;else if(0==e.r[0]&&0==e.r[1])e.rotationType=i;else if(0==e.r[0]&&1==e.r[1]){if(0!=i&&3!=i)continue;e.rotationType=i}else if(1==e.r[0]&&0==e.r[1]){if(0!=i&&1!=i)continue;e.rotationType=i}var n=e.getDimension();if(!(this.getWidth()<t[0]+n[0]||this.getHeight()<t[1]+n[1]||this.getDepth()<t[2]+n[2]||e.weight>this.cw&&this.cw<0)&&(1!=e.ap||0==t[1])){a=!0;for(var r=0;r<this.items.length;r++){if(this.items[r].intersect(e)){a=!1;break}}return a&&(this.items.push(e),this.cw=this.cw-e.weight),a}}return a}}]),e}();t.Bin=m;var h=function(){function e(t,a,i,r,o,s,l,m,h){c(this,e),this.id="",this.name="",this.width=0,this.height=0,this.depth=0,this.weight=0,this.t=0,this.ap=0,this.r=[],this.color="",this.rotationType=n,this.position=[],this.id=Math.random().toString(36).substr(2,5),this.name=t,this.width=a,this.height=i,this.depth=r,this.weight=o,this.t=s,this.ap=l,this.r=m,this.color=h}return o(e,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getWeight",value:function(){return this.weight}},{key:"getRotationType",value:function(){return this.rotationType}},{key:"getRotationTypeString",value:function(){return s[this.getRotationType()]}},{key:"getDimension",value:function(){var e=void 0;switch(this.rotationType){case n:e=[this.getWidth(),this.getHeight(),this.getDepth()];break;case 1:e=[this.getHeight(),this.getWidth(),this.getDepth()];break;case 2:e=[this.getHeight(),this.getDepth(),this.getWidth()];break;case 3:e=[this.getDepth(),this.getHeight(),this.getWidth()];break;case 4:e=[this.getDepth(),this.getWidth(),this.getHeight()];break;case 5:e=[this.getWidth(),this.getDepth(),this.getHeight()]}return e}},{key:"intersect",value:function(e){return d(this,e,0,1)&&d(this,e,1,2)&&d(this,e,0,2)}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}}]),e}();t.Item=h;var u=function(){function e(){c(this,e),this.bins=[],this.items=[],this.unfitItems=[]}return o(e,[{key:"addBin",value:function(e){this.bins.push(e)}},{key:"addItem",value:function(e){this.items.push(e)}},{key:"findFittedBin",value:function(e){for(var t=0;t<this.bins.length;t++){var a=this.bins[t];if(a.putItem(e,r))return 1===a.items.length&&a.items[0]===e&&(a.items=[]),a}return null}},{key:"getBiggerBinThan",value:function(e){for(var t=e.getVolume(),a=0;a<this.bins;a++){var i=this.bins[a];if(i.getVolume()>t)return i}return null}},{key:"unfitItem",value:function(){0!==this.items.length&&(this.unfitItems.push(this.items[0]),this.items.splice(0,1))}},{key:"packToBin",value:function(e,t){var a=!1,i=null,n=[];if(!e.putItem(t[0],r)){var o=this.getBiggerBinThan(e);return o?this.packToBin(o,t):this.items}for(var s=1;s<this.items.length;s++){var c=this.items[s];e:for(var l=0;l<3;l++)for(var m=0;m<e.items.length;m++){var h=void 0,u=e.items[m];switch(l){case 0:h=[u.position[0]+u.getWidth(),u.position[1],u.position[2]];break;case 1:h=[u.position[0],u.position[1]+u.getHeight(),u.position[2]];break;case 2:h=[u.position[0],u.position[1],u.position[2]+u.getDepth()]}if(e.putItem(c,h)){a=!0;break e}}if(!a){for(;null!==i;){if(i=this.getBiggerBinThan(e))if(i.items.push(c),0===this.packToBin(i,i.items).length){e=i,a=!0;break}}a||n.push(c)}}return n}},{key:"pack",value:function(){for(this.bins.sort(function(e,t){return e.getVolume()>t.getVolume()}),this.items.sort(function(e,t){return e.getVolume()>t.getVolume()});this.items.length>0;){var e=this.findFittedBin(this.items[0]);null!==e?this.items=this.packToBin(e,this.items):this.unfitItem()}return null}}]),e}();t.Packer=u;var d=function(e,t,a,i){var n,r,o,s,c,l,m,h;return n=e.getDimension(),r=t.getDimension(),o=e.position[a]+n[a]/2,s=e.position[i]+n[i]/2,c=t.position[a]+r[a]/2,l=t.position[i]+r[i]/2,m=Math.max(o,c)-Math.min(o,c),h=Math.max(s,l)-Math.min(s,l),m<(n[a]+r[a])/2&&h<(n[i]+r[i])/2}}])},"object"===s(t)&&"object"===s(e)?e.exports=r():(i=[],void 0===(n="function"==typeof(a=r)?a.apply(t,i):a)||(e.exports=n))}).call(this,a(6)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,a){"use strict";var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"generar_json_sin_pallets",value:function(e){for(var t={box:[]},a=0;a<e.length;a++){for(var i=0,n=0,r=0,o=[],s=0;s<e[a].items.length;s++)o.push({name:e[a].items[s].name,i:s,w:e[a].items[s].width,h:e[a].items[s].height,d:e[a].items[s].depth,x:e[a].items[s].position[0],y:e[a].items[s].position[1],z:e[a].items[s].position[2],r:0!=e[a].items[s].rotationType?1:0,t:e[a].items[s].t,color:e[a].items[s].color,pallet:0}),i+=e[a].items[s].weight,0==e[a].items[s].t||2==e[a].items[s].t?n+=e[a].items[s].width*e[a].items[s].height*e[a].items[s].depth:1==e[a].items[s].t&&(n+=Math.PI*(Math.pow(e[a].items[s].width,2)*e[a].items[s].height)),r+=1;t.box.push({name:e[a].name,w:e[a].width,h:e[a].height,d:e[a].depth,tl:15.25,f:1,items:o,volumen_paquetes:n.toFixed(2),peso_total_paquetes:i,total_paquetes:r,peso_maximo_container:e[a].maxWeight})}return console.log(JSON.stringify(t)),console.log("%o",t),JSON.stringify(t)}},{key:"generar_json_con_pallets",value:function(e,t){var a={box:[]};return e.forEach(function(e,i){var n=[],r=0,o=0,s=0;e.items.forEach(function(e,a){var i=[];t.items[a].items.forEach(function(a,n){i.push({name:a.name,i:n,w:a.width,h:a.height,d:a.depth,x:a.position[0]+e.position[0],y:a.position[1]+e.position[1]+t.pallet.alto,z:a.position[2]+e.position[2],r:0!=a.rotationType?1:0,t:a.t,color:a.color}),a.color,o+=a.weight,r+=1,0==a.t||2==a.t?s+=a.width*a.height*a.depth:1==a.t&&(s+=Math.PI*(Math.pow(a.width,2)*a.height))}),n.push({name:e.name,i:e.i,w:e.width,h:t.pallet.alto,d:e.depth,x:e.position[0],y:e.position[1],z:e.position[2],r:e.r,t:e.t,color:"d0d68a",items:i,pallet:1})}),a.box.push({name:e.name,w:e.width,h:e.height,d:e.depth,tl:0,f:1,items:n,volumen_paquetes:s.toFixed(2),peso_total_paquetes:o,total_paquetes:r,peso_maximo_container:e.maxWeight})}),console.log("RESULTADO PALLET DEMO"),console.log("%o",a),console.log(JSON.stringify(a)),JSON.stringify(a)}},{key:"generar_json",value:function(e,t){return null==t?this.generar_json_sin_pallets(e):this.generar_json_con_pallets(e,t)}}]),e}()}]);